let pokemonRepository=function(){let e=[];function t(){return e}function o(t){let o=Object.keys(t);"object"==typeof t&&null!==t&&["name","detailsUrl"].every(e=>o.includes(e))?e.push(t):console.error("Please provide an object with name and detailsUrl properties")}function n(t){l(t).then(function(){let o=e.indexOf(t);modal.showModal(t.name,t.height,t.imageUrl,o)})}function l(e){return i(),fetch(e.detailsUrl).then(e=>{if(!e.ok)throw Error("Failed to fetch Pokemon details");return e.json()}).then(t=>{e.imageUrl=t.sprites.front_default,e.height=t.height}).catch(a).finally(r)}function i(){if(!document.querySelector(".loading-message")){let e=document.createElement("p");e.innerText="Hold tight, Trainer! Rare finds take time!",e.classList.add("loading-message"),document.body.appendChild(e)}}function r(){let e=document.querySelector(".loading-message");e&&e.remove()}function a(e){r();let t=document.createElement("p");t.innerText=`Error: ${e.message||"Something went wrong!"}`,t.classList.add("error-message"),document.body.appendChild(t),setTimeout(()=>t.remove(),5e3)}return{getAll:t,add:o,addListItem:function e(t,o=!1){let l=document.querySelector(".pokemon-list"),i=document.createElement("li"),r=document.createElement("button");if(r.innerText=t.name,r.classList.add("button-class","list-group-item","list-group-item-action","btn","btn-primary"),i.classList.add("list-group","col-lg-4","col-md-6","col-12"),!function e(t,o){t.addEventListener("click",function(){n(o)})}(r,t),r.setAttribute("data-bs-toggle","modal"),r.setAttribute("data-bs-target","#pokemonModal"),i.appendChild(r),o){let a=document.createElement("p");a.innerText=`Height: ${t.height}`,a.classList.add("pokemon-height"),i.appendChild(a)}l.appendChild(i)},showDetails:n,loadList:function e(){return i(),fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(e=>{if(!e.ok)throw Error("Failed to fetch Pokemon list");return e.json()}).then(e=>{e.results.forEach(e=>{o({name:e.name,detailsUrl:e.url})})}).catch(a).finally(r)},loadDetails:l}}(),modal=function(){let e=0;function t(){document.querySelectorAll(".modal-backdrop").forEach(e=>e.remove())}return{showModal:function o(n,l,i,r){let a=document.querySelector(".modal-title"),s=document.querySelector(".modal-body"),d=document.getElementById("pokemonModal");a.innerText=n,s.textContent="";let m=document.createElement("p");m.textContent=`Height: ${l}`;let p=document.createElement("img");p.src=i,p.alt=n,p.loading="lazy",s.appendChild(m),s.appendChild(p),e=r,t();let c=new bootstrap.Modal(d);d.addEventListener("hidden.bs.modal",t),c.show()},showNextPokemon:function t(){let o=pokemonRepository.getAll();o.length&&(e=(e+1)%o.length,pokemonRepository.showDetails(o[e]))},showPreviousPokemon:function t(){let o=pokemonRepository.getAll();o.length&&(e=(e-1+o.length)%o.length,pokemonRepository.showDetails(o[e]))}}}();function sortPokemon(e){Promise.all(pokemonRepository.getAll().map(e=>pokemonRepository.loadDetails(e))).then(()=>{let t=pokemonRepository.getAll();"name"===e?t.sort((e,t)=>e.name.localeCompare(t.name)):"height"===e&&t.sort((e,t)=>e.height-t.height);let o=document.querySelector(".pokemon-list");o.innerHTML="",t.forEach(t=>pokemonRepository.addListItem(t,"height"===e))})}pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})}),document.getElementById("search-button").addEventListener("click",function(e){e.preventDefault();let t=document.getElementById("search-input").value.trim().toLowerCase(),o=pokemonRepository.getAll().find(e=>e.name.toLowerCase()===t);o?pokemonRepository.showDetails(o):alert("Hmm, nothing here... perhaps it used Teleport!")}),document.querySelectorAll(".dropdown-item").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();let t=this.getAttribute("data-sort");sortPokemon(t)})});